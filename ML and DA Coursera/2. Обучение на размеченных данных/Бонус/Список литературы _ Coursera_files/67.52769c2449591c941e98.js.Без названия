(window.webpackJsonp=window.webpackJsonp||[]).push([[67],{"+EFy":function(module,exports,e){var t=e("SqYO"),r;"string"==typeof t&&(t=[[module.i,t,""]]);var n={transform:void 0},a=e("aET+")(t,n);t.locals&&(module.exports=t.locals)},"+uTL":function(module,e,t){"use strict";t.d(e,"a",function(){return a}),t.d(e,"b",function(){return o}),t.d(e,"c",function(){return s});var r=t("HRhj"),n=t("sQ/U"),a=function getForumSubscription(e,t){return r.a.getSubscription(e,t).then(function(e){return Object.assign(e.elements[0],{isSubscribed:!0})}).catch(function(t){if(404===t.status)return{id:e,isSubscribed:!1};throw t})},o=function subscribeUserToEntity(e,t){if(n.a.isAuthenticatedUser())return r.a.subscribe(e,t)},s=function unsubscribeUserFromEntity(e,t){if(n.a.isAuthenticatedUser())return r.a.unsubscribe(e,t)}},"3As7":function(module,e,t){"use strict";t.r(e);var r=t("VbXa"),n=t.n(r),a=t("17x9"),o=t.n(a),s=t("q1tI"),i=t.n(s),c=t("F/us"),u=t.n(c),l=t("BVC1"),d=t("Od0f"),p=t("GqWO"),m=t("7GkZ"),h=t("zfwB"),f=t("zwd1"),b=t("fg2g"),v=t("cD+G"),S=t("olxp"),g=t("jLko"),y=t("ypD2"),I=t("ii1C"),F=t("HbX8"),E=t("2BcA"),x=t("5+aF"),O=t("W1i5"),C=t("+LJP"),T=t("GP6s"),j=t.n(T),w=t("B0lp"),N=t.n(w),P=t("6fvP"),q=t("jrIE"),D=function(e){function ThreadsView(t){var r;return(r=e.call(this,t)||this).renderBreadCrumbs=function(){var e,t=r.props.currentForum,n,a=!!r.context.router.params.question_id;t.parentForumId&&r.props.listedForums.forEach(function(e){(null==t?void 0:t.parentForumId)&&e&&e.id&&t.parentForumId===e.id&&(n=e)});var o=[{label:j()("Discussion Forums"),href:Object(p.h)()}],s=n?{label:n.title,href:l.a.join(Object(p.j)(r.props.courseSlug),n.link)}:void 0,c;return s&&o.push(s),!!(null===(e=r.context.router.location.query)||void 0===e?void 0:e.q)?((o=[]).push({label:j()("Course Overview"),href:Object(p.i)(r.props.courseSlug)}),o.push({label:j()("Forums"),href:Object(p.h)()}),o.push({label:j()("Search results")})):a?o.push({label:t.title,href:l.a.join(Object(p.j)(r.props.courseSlug),t.link)}):o.push({label:t.title}),i.a.createElement(h.a,{separator:i.a.createElement(q.a,{size:16,color:"#1F1F1F"}),className:"breadcrumbs",links:o})},r.resourcePanelEnabled=P.b.enabledResourcePanelToPublic(),r}n()(ThreadsView,e);var t=ThreadsView.prototype;return t.renderSubscriptionButton=function renderSubscriptionButton(){var e=this.props.currentForum;if(!e||e.forumType.typeName===E.j.itemForumType)return null;return i.a.createElement("div",{className:"flex-1"},i.a.createElement(f.a,{forumId:this.props.currentForum&&this.props.currentForum.id,forumType:this.props.currentForum&&this.props.currentForum.forumType.typeName,groupId:this.props.currentForum&&this.props.currentForum.forumType.definition.groupId}))},t.render=function render(){var e,t=this.props.currentForum;if(!t)return i.a.createElement("div",{className:"forum-name headline-5-text color-primary-text"},j()("Oops! Looks like this thread isn't viewable or does not exist."));var r=t.title,n=t.description,a=t.id,o=!!this.context.router.params.question_id,s=!!(null===(e=this.context.router.location.query)||void 0===e?void 0:e.q);return i.a.createElement("div",{className:"rc-ForumsV2ThreadsView"},i.a.createElement("div",{className:"horizontal-box vertical-when-tablet"},i.a.createElement("div",{className:"flex-2 threads-view-header"},this.renderBreadCrumbs(),i.a.createElement("div",null,!o&&!s&&i.a.createElement("div",{className:"forum-name color-primary-text"},r),!o&&!s&&i.a.createElement("div",{className:"forum-description horizontal-box"},i.a.createElement(m.a,{cml:n,isCdsEnabled:!0}),i.a.createElement("div",null,this.renderSubscriptionButton())))),i.a.createElement("div",{className:"flex-1 align-self-end session-switcher-container"},i.a.createElement(b.a,null))),i.a.createElement("div",{className:"horizontal-box align-items-top vertical-when-tablet"},i.a.createElement(d.a,{className:"flex-2 discussions-body-column",key:a})))},ThreadsView}(i.a.Component);D.contextTypes={router:o.a.object.isRequired},e.default=Object(c.compose)(Object(x.a)({fields:["title","description","link"],subcomponents:[v.a,S.a,g.a,y.a]}),Object(C.a)(I.a),Object(O.a)(F.a))(D)},"3SNW":function(module,exports,e){var t=e("T/Ie"),r;"string"==typeof t&&(t=[[module.i,t,""]]);var n={transform:void 0},a=e("aET+")(t,n);t.locals&&(module.exports=t.locals)},"4a6e":function(module,e,t){"use strict";var r=t("VbXa"),n=t.n(r),a=t("q1tI"),o=t.n(a),s=t("17x9"),i=t.n(s),c=t("GP6s"),u=t.n(c),l=t("kcfJ"),d=t("+EFy"),p=t.n(d),m=t("IDuc"),h=t("ZJgU"),f=function(e){function SearchBar(){for(var t,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(t=e.call.apply(e,[this].concat(n))||this).handleChange=function(e){var r,n;(0,t.props.handleChange)(e.target.value)},t.handleSubmitClick=function(e){var r;e.preventDefault(),(0,t.props.handleSubmit)()},t.handleClear=function(){var e=t.context.router,r=e.location,n=r.query,a=r.pathname,o=e.params,s=t.props,i=s.handleBlur,c=s.handleClear;n.q||i(),c(),delete n.q,e.push({pathname:a,params:o,query:n})},t.handleBlur=function(){var e=t.props.handleBlur;e&&e()},t.handleKeyDown=function(e){var r=t.props,n=r.handleSubmit,a=r.handleBlur,o=r.handleShiftTab;switch(e.key){case"Enter":n();break;case"Tab":e.shiftKey&&a&&(a(),o(e))}},t.handleClearKeyDown=function(e){var r=t.props,n=r.handleBlur,a=r.handleShiftTab;switch(e.key){case"Enter":t.handleClear();break;case"Tab":e.shiftKey&&n&&(n(),a(e))}},t.submitKeyDown=function(e){var r=t.props,n=r.handleTab,a=r.handleShiftTab,o=r.handleSubmit;"Tab"===e.key?e.shiftKey?a(e):n(e):"Enter"!==e.key&&" "!==e.key||o()},t}var t;return n()(SearchBar,e),SearchBar.prototype.render=function render(){var e=this,t=this.props.query,r=a.createElement("i",{role:"button",onMouseDown:this.handleClear,tabIndex:0,onKeyDown:this.handleClearKeyDown,className:"cif-cancel-hint close-icon","aria-label":u()("Clear Search")});return a.createElement("div",{className:"rc-ForumsV2__SearchBar search-bar expand-block expanded flex-1"},a.createElement("div",{className:"input-area"},a.createElement(l.a,{trackingName:"search_bar",value:t,onChange:this.handleChange,onKeyDown:this.handleKeyDown,ref:function ref(t){e.searchbox=t},"aria-label":u()("Search Input"),className:"search-input"})),a.createElement(h.a,{component:m.a,type:"button",variant:"primary",withVisibilityTracking:!0,requireFullyVisible:!1,className:"primary large-screen",onClick:this.handleSubmitClick,onMouseDown:this.handleSubmitClick,onKeyDown:this.submitKeyDown,onBlur:this.handleBlur,trackingName:"search_forum","aria-label":u()("submit search")},u()("Search")))},SearchBar}(a.Component);f.contextTypes={router:i.a.object.isRequired},f.defaultProps={handleBlur:function handleBlur(){},handleTab:function handleTab(){},handleShiftTab:function handleShiftTab(){},handleClear:function handleClear(){}},e.a=f},"7XSy":function(module,e,t){"use strict";var r=t("VbXa"),n=t.n(r),a=t("q1tI"),o=t.n(a),s=t("17x9"),i=t.n(s),c=t("GP6s"),u=t.n(c),l=t("NcZ8"),d=t("kcfJ"),p=t("UCz2"),m=t.n(p),h=t("IDuc"),f=t("ZJgU"),b=function(e){function SearchBox(){for(var t,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(t=e.call.apply(e,[this].concat(n))||this).state={showBar:!0,query:""},t.handleQueryChange=function(e){t.setState({query:e})},t.handleFocus=function(){var e;(0,t.props.animateToSearch)()},t.handleBlur=function(){var e;(0,t.props.animateFromSearch)()},t.handleClear=function(){t.setState({query:""})},t.handleTab=function(e){var r=t.props.nextElementId,n=r&&document&&document.getElementById(r);n&&(e.preventDefault(),n.focus())},t.handleShiftTab=function(e){var r=t.props.previousElementId,n=r&&document&&document.getElementById(r);n&&(e.preventDefault(),n.focus())},t.submitSearch=function(){var e=t.state.query,r=t.context.router,n=t.props.onSubmit,a=r.location.pathname;if(e){var o=e.replace("*","");void 0!==n&&n(o),r.push({pathname:a,params:{},query:{q:o}})}},t}var t;return n()(SearchBox,e),SearchBox.prototype.render=function render(){var e=this.state,t=e.showBar,r=e.query;return t?o.a.createElement(l.a,{query:r,handleSubmit:this.submitSearch,handleChange:this.handleQueryChange,handleBlur:this.handleBlur,handleShiftTab:this.handleShiftTab,handleTab:this.handleTab,handleClear:this.handleClear,focus:!0}):o.a.createElement("div",{className:"rc-ForumsV2__SearchBox expand-block flex-1"},o.a.createElement("div",{className:"large-screen search-bar"},o.a.createElement("div",{className:"input-area"},o.a.createElement(d.a,{trackingName:"search_box",onClick:this.handleFocus,onFocus:this.handleFocus,value:r,className:"rc-ForumsV2__search-box search-input","aria-label":"Search"})),o.a.createElement(f.a,{component:h.a,type:"button",onClick:this.handleFocus,variant:"primary",withVisibilityTracking:!0,requireFullyVisible:!1,trackingName:"search_forum"},u()("Search"))),o.a.createElement("div",{className:"mobile hide horizontal-box align-items-right"},o.a.createElement(f.a,{component:h.a,type:"button",onClick:this.handleFocus,variant:"primary",withVisibilityTracking:!0,requireFullyVisible:!1,trackingName:"search_forum"},u()("Search"))))},SearchBox}(o.a.Component);b.contextTypes={router:i.a.object.isRequired},e.a=b},"8gSW":function(module,e,t){"use strict";var r=t("VbXa"),n=t.n(r),a=t("17x9"),o=t.n(a),s=t("q1tI"),i=t.n(s),c=t("wd/R"),u=t.n(c),l=t("F/us"),d=t.n(l),p=t("py0D"),m=t("9A5E"),h=t("8cuT"),f=t("eMx6"),b=t("8Hdl"),v=t("fAYU"),S=t("oEqI"),g=t("AeFk"),y=t("vOU6"),I=function(e){function ThreadsListEntry(){for(var t,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(t=e.call.apply(e,[this].concat(n))||this).state={threadFocus:!1},t.style={},t.componentWillMount=function(){t.style={padding:"24px 0",position:"relative",borderBottom:"1px solid ".concat(t.props.theme.palette.gray[300]),"&:last-child":{borderBottom:"none"},"&.focused, &:hover, &.focused a":{textDecoration:"none"},".forReader":{height:0,width:0}}},t.handleThreadFocus=function(){t.setState({threadFocus:!0})},t.handleThreadBlur=function(){t.setState({threadFocus:!1})},t}var t;return n()(ThreadsListEntry,e),ThreadsListEntry.prototype.render=function render(){var e,t,r,n=this.props,a=n.entry,o=n.isPinned,s=n.isDeleted,i=n.threadUrl,c=n.viewCount,l=n.answerCount,d=n.badge,h=n.threadName,S=n.timestamp,I=n.questionId,F=n.questionUserId,E=n.isRead,x=this.state.threadFocus,O=void 0!==c&&!Number.isNaN(c),C=void 0!==l&&!Number.isNaN(l),T="".concat(o?"Pinned ":"","Thread: ").concat(h,", \n                          ").concat(u()(S).fromNow(),"\n                          ").concat(O?", ".concat(c," views"):""," \n                          ").concat(C?", ".concat(l," replies"):"");return Object(g.d)("li",{css:this.style,className:"rc-forumsV2_DiscussionsBody_ThreadsListEntry ".concat(x?"focused":"blurred")},this.props.entry&&Object(g.d)(y.a,{title:this.props.entry.content.question,pinned:o,titleLink:i&&Object(g.d)(b.a,{variant:E?"h2":"h2semibold",className:"rc-ForumsV2_ForumThreadCard__title"},Object(g.d)(v.a,{component:m.c,href:i,trackingName:"thread_list_entry","aria-label":T,data:{question_id:I,question_user_id:F}},this.props.entry.content.question))||void 0,threadUrl:i,description:Object(g.d)(f.a,{cml:null===(e=this.props)||void 0===e?void 0:null===(t=e.entry)||void 0===t?void 0:null===(r=t.content)||void 0===r?void 0:r.details,contentLineCountMax:2}),isUpvoted:this.props.entry.isUpvoted,upvoteCount:this.props.entry.upvoteCount,forumQuestionId:this.props.questionId,creator:this.props.entry.creator,createdAt:this.props.entry.createdAt,replyCount:this.props.answerCount,lastReplier:this.props.profile,lastReplyDate:this.props.timestamp,answerCount:this.props.answerCount,badge:d,isRead:this.props.isRead}),s&&Object(g.d)(p.a,{entry:a,hideUndoDelete:!0}))},ThreadsListEntry}(i.a.Component);I.contextTypes={executeAction:o.a.func.isRequired},I.defaultProps={isPinned:!1,isDeleted:!1,isRead:!0},e.a=d.a.compose(Object(h.a)(["CourseStore","ClassmatesProfileStore"],function(e,t){var r=e.CourseStore,n=e.ClassmatesProfileStore,a=t.profile;return{courseId:r.getCourseId(),fullProfile:d()(n.profiles).findWhere({externalId:a.externalUserId})}}))(Object(S.a)(I))},"9UIe":function(module,e,t){"use strict";var r=t("VbXa"),n=t.n(r),a=t("q1tI"),o=t.n(a),s=t("17x9"),i=t.n(s),c=t("MnCE"),u=t("2BcA"),l=t("sBaw"),d=t("OrSE"),p=t("eE4N"),m=t("JVW9"),h=t("BVC1"),f=t("+LJP"),b=t("8cuT"),v=t("EdUP"),S=t("GqWO"),g=t("ii1C"),y=t("5+aF"),I=t("kvW3"),F=t("GP6s"),E=t.n(F),x=t("3SNW"),O=t.n(x),C=t("N43y"),T=t.n(C),j=t("8Hdl"),w=function(e){function SearchResults(t,r){var n,a;((n=e.call(this,t,r)||this).handleQueryChange=function(e){n.setState({query:e})},n.handleSearchCourse=function(e){var t=n.state.query,r=n.props.rootPath,a=n.context.router;e.preventDefault();var o=h.a.join(null!=r?r:[],"discussions/all");a.push({pathname:o,params:{},query:{q:t}})},n.onPageChange=function(e){var t=n.props,r=t.query,a=t.currentForum,o=t.contextId,s=t.hasModerationRole,i=n.context,c=i.router,u=i.executeAction;c.push({pathname:c.location.pathname,params:{},query:Object.assign(c.location.query,{page:e})}),u(l.a.goToPage,{query:r,pageNum:e,forumId:a.forumId,filterQueryString:n.props.filterQueryString,contextId:o,forumType:a.forumType.typeName,includeDeleted:s})},n.submitSearch=function(){var e=n.state.query,t=n.context.router;if(e){var r=e.replace("*","");t.push({pathname:window.location.pathname,params:{},query:{q:r}})}},n.navigateBack=function(e){var t=n.context.router,r=n.props.currentForumUrl;e.preventDefault(),t.push(r)},n.state={query:t.query||""},t.query)&&(0,n.context.executeAction)(l.a.search,{query:t.query,filterQueryString:t.filterQueryString,pageNum:t.page,forumId:t.currentForum.forumId,contextId:t.contextId,forumType:t.currentForum.forumType.typeName,reset:!0,includeDeleted:t.hasModerationRole});return n}n()(SearchResults,e);var t=SearchResults.prototype;return t.componentWillReceiveProps=function componentWillReceiveProps(e){var t=this.props,r=t.query,n=t.pathname,a=t.currentForum,o=t.filterQueryString,s=t.page,i=this.context.executeAction;e.query===r&&e.pathname===n&&e.currentForum.id===a.id&&e.filterQueryString===o||(this.setState({query:e.query}),i(l.a.search,{query:e.query,filterQueryString:e.filterQueryString,pageNum:s,forumId:e.currentForum.forumId,contextId:e.contextId,forumType:e.currentForum.forumType.typeName,reset:o!==e.filterQueryString,includeDeleted:e.hasModerationRole}))},t.render=function render(){var e=this.props,t=e.currentForum,r=e.currentForumUrl,n=e.loadingState,a=e.numResults,s=e.currentResults,i=e.page,c=e.pageCount,l=e.query,h,f=this.context.router.isActive({pathname:Object(S.c)()}),b=t.title,v=r,g=n===u.i.DONE?E()("#{numResults} Discussions",{numResults:a}):E()("Finding search results in #{displayName}",{displayName:b}),y,F=o.a.createElement("div",{className:"results-metadata"},o.a.createElement(j.a,{variant:"h2semibold","aria-live":"polite"},n===u.i.DONE?o.a.createElement("span",null,g):o.a.createElement(I.b,{message:E()("Finding search results in {displayName}"),displayName:b})));return n===u.i.DONE&&s.length>0&&(y=s.map(function(e,t){return o.a.createElement(p.a,{page:i,query:l,forumLink:v||"",entry:e,index:t})})),o.a.createElement("div",{className:"rc-ForumsV2__DiscussionsSearchResults"},!f&&F,o.a.createElement(d.a,{loadingState:n},y),o.a.createElement(m.a,{style:{textAlign:"center"},onClickHandler:this.onPageChange,pageCount:c||1,currentPage:i,maxPages:5}))},SearchResults}(o.a.Component);w.contextTypes={executeAction:i.a.func.isRequired,router:i.a.object.isRequired},e.a=Object(c.compose)(Object(f.a)(function(e){return{query:decodeURIComponent(e.location.query.q),pathname:e.location.pathname}}),Object(y.a)({fields:["title","link","forumType"]}),Object(f.a)(g.a),Object(b.a)(["DiscussionsSearchStore","SessionFilterStore"],function(e,t){var r=e.DiscussionsSearchStore,n=e.SessionFilterStore,a=t.currentForum.forumId;return{filterQueryString:n.activeFilterQueryString,currentResults:r.searchResults({forumId:a,query:t.query,pageNum:r.currentPage}),loadingState:r.loadingState,pageCount:r.getPageCount({forumId:a,query:t.query}),numResults:r.getNumResults({forumId:a,query:t.query})}}),Object(v.a)(function(e){return e.currentForum}))(w);var N=w},AgXR:function(module,e,t){"use strict";t.d(e,"c",function(){return s}),t.d(e,"a",function(){return i}),t.d(e,"b",function(){return c});var r=t("lSNA"),n=t.n(r),a=t("+uTL"),o=t("sQ/U");function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach(function(t){n()(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var s=function fetchSubscriptionForForum(e,t){var r=t.forumSubscriptionId,n=t.forumType;if(o.a.isAuthenticatedUser())return a.a(r,n).then(function(t){e.dispatch("UPDATE_SUBSCRIPTION",t)}).catch(function(t){e.dispatch("UPDATE_SUBSCRIPTION_FAILED",t)});return Promise.reject(new Error("User not authenticated"))},i=function addSubscription(e,t){var r=t.forumSubscriptionId,n=t.forumType;if(o.a.isAuthenticatedUser())return e.dispatch("UPDATE_SUBSCRIPTION",{id:r,isInProgress:!0}),a.b(r,n).then(function(){e.dispatch("UPDATE_SUBSCRIPTION",{id:r,isSubscribed:!0})}).catch(function(t){e.dispatch("UPDATE_SUBSCRIPTION_FAILED",t)});return Promise.reject(new Error("User not authenticated"))},c=function deleteSubscription(e,t){var r=t.subscription,n=t.forumSubscriptionId,s=t.forumType;if(o.a.isAuthenticatedUser())return e.dispatch("UPDATE_SUBSCRIPTION",_objectSpread(_objectSpread({},r),{},{isInProgress:!0})),a.c(n,s).then(function(){e.dispatch("UPDATE_SUBSCRIPTION",{id:n,isSubscribed:!1})}).catch(function(t){e.dispatch("UPDATE_SUBSCRIPTION_FAILED",t)});return Promise.reject(new Error("User not authenticated"))}},B0lp:function(module,exports,e){var t=e("IVoF"),r;"string"==typeof t&&(t=[[module.i,t,""]]);var n={transform:void 0},a=e("aET+")(t,n);t.locals&&(module.exports=t.locals)},CxSU:function(module,exports,e){var t=e("IrDx"),r;"string"==typeof t&&(t=[[module.i,t,""]]);var n={transform:void 0},a=e("aET+")(t,n);t.locals&&(module.exports=t.locals)},ECux:function(module,exports,e){},HRhj:function(module,e,t){"use strict";var r=t("S+eF"),n=t.n(r),a=t("TSOT"),o=t("2BcA"),s=Object(a.a)("/api/onDemandCourseForumSubscriptions.v1",{type:"rest"}),i=Object(a.a)("/api/onDemandMentorForumSubscriptions.v1",{type:"rest"}),c=Object(a.a)("/api/groupForumSubscriptions.v1",{type:"rest"}),u=function getSubscription(e,t){return t===o.j.mentorForumType?n()(i.get(e)):t===o.j.groupForumType?n()(c.get(e)):n()(s.get(e))},l=function subscribe(e,t){return t===o.j.mentorForumType?n()(i.put(e)):t===o.j.groupForumType?n()(c.put(e)):n()(s.put(e))},d=function unsubscribe(e,t){return t===o.j.mentorForumType?n()(i.delete(e)):t===o.j.groupForumType?n()(c.delete(e)):n()(s.delete(e))};e.a={getSubscription:u,subscribe:l,unsubscribe:d}},HbX8:function(module,e,t){"use strict";var r=t("lSNA"),n=t.n(r),a=t("2BcA");function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach(function(t){n()(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}e.a=function(e){if(!e.currentForum)return e;var t=e.courseForums.concat(e.mentorForums).concat(e.groupForums),r=t.find(function(e){return e.forumType.typeName===a.j.rootForumType}),n=e.currentForum;e.currentForum.parentForumId&&e.currentForum.parentForumId!==r.id&&(n=t.find(function(t){return t.id===e.currentForum.parentForumId}));var o=t.filter(function(e){return e.parentForumId===n.id});return o.unshift(n),_objectSpread(_objectSpread({},e),{},{listedForums:o,parentForumId:n.id})}},IVoF:function(module,exports,e){},IrDx:function(module,exports,e){},Jh7B:function(module,exports,e){},NcZ8:function(module,e,t){"use strict";var r=t("7XSy");t.d(e,"b",function(){return r.a});var n=t("4a6e");t.d(e,"a",function(){return n.a});var a=t("9UIe")},Od0f:function(module,e,t){"use strict";t.d(e,"a",function(){return B});var r=t("pVnL"),n=t.n(r),a=t("VbXa"),o=t.n(a),s=t("lSNA"),i=t.n(s),c=t("17x9"),u=t.n(c),l=t("q1tI"),d=t.n(l),p=t("F/us"),m=t.n(p),h=t("w/1P"),f=t.n(h),b=t("L1vm"),v=t("2BcA"),S=t("olxp"),g=t("9UIe"),y=t("KJtU"),I=t("8cuT"),F=t("+LJP"),E=t("ngyh"),x=t("8/1n"),O=t("GP6s"),C=t.n(O),T=t("763+"),j=t("6/Gu"),w=t("8Hdl"),N=t("AeFk"),P=t("yb7V"),q=t("NcZ8"),D=t("NoGk");function SearchBarCoreLayout(e){var t,r=e.children,n=Object(T.a)(),a=Object(N.c)({".searchBoxContainer":{justifyContent:"flex-start"},".newThreadButtonContainer":(t={justifyContent:"flex-start",alignItems:"center","& .orStatement":{padding:n.spacing(0,24)}},i()(t,"".concat(n.breakpoints.up("sm")),{padding:n.spacing(0)}),i()(t,"".concat(n.breakpoints.down("xs")),{padding:n.spacing(24,0,0,0),"& .orStatement":{padding:n.spacing(0,24,0,0)}}),t)});return Object(N.d)(j.a,{container:!0,css:a},Object(N.d)(j.a,{container:!0,item:!0,style:{display:"flex",justifyContent:"space-between"}},Object(N.d)(j.a,{item:!0,xs:12,sm:9,className:"searchBoxContainer"},Object(N.d)(q.b,{previousElementId:"sortOrder",nextElementId:"new-thread-btn",animateFromSearch:function animateFromSearch(){return null},animateToSearch:function animateToSearch(){return null}})),Object(N.d)(j.a,{item:!0,xs:12,sm:3,className:"newThreadButtonContainer"},Object(N.d)(j.a,{container:!0,css:{flexFlow:"row"}},Object(N.d)(j.a,{item:!0,css:{alignItems:"center",display:"flex"}},Object(N.d)(w.a,{color:"supportText",variant:"body2",component:"span",className:"orStatement"},C()("or"))),Object(N.d)(j.a,{item:!0},Object(N.d)(P.b,null))))),Object(N.d)(j.a,{container:!0,item:!0,style:{maxWidth:"650px",padding:n.spacing(32,0,0,0)}},r))}var A=function(e){o()(DiscussionsBody,e);var t=DiscussionsBody.prototype;function DiscussionsBody(t,r){var n;return n=e.call(this,t,r)||this,!t.isSessionsFilterStoreSetup&&t.hasModerationRole&&r.executeAction(y.a,{courseId:t.courseId,currentSessionId:t.currentSessionId,isPrivateSession:t.isPrivateSession}),t.isSessionsFilterStoreSetup||t.hasModerationRole||r.executeAction(y.b,{courseId:t.courseId,currentSessionId:t.currentSessionId,isPrivateSession:t.isPrivateSession}),n}return t.getChildContext=function getChildContext(){return{fluxibleContext:this.context.fluxibleContext||this.props.fluxibleContext}},t.renderSearchResults=function renderSearchResults(){var e=this.props,t=e.searchPage,r=e.q;return Object(N.d)(SearchBarCoreLayout,null,Object(N.d)(g.a,{query:r,page:t,currentForumUrl:this.context.currentForumUrl,currentForum:this.context.currentForum,pathname:this.context.pathName}))},t.renderThreadsList=function renderThreadsList(){var e=this,t=this.props,r=t.hasModerationRole,n=t.listPage,a=t.listSort,o=t.listAnswered;return Object(N.d)(SearchBarCoreLayout,null,Object(N.d)(S.a,{ref:function ref(t){e.threadsList=t},hasModerationRole:r,sort:a,answered:o,page:n}))},t.renderThreadDetail=function renderThreadDetail(){var e=this.props.courseId,t=this.props,r=t.questionId,n=t.answerId,a=t.commentId,o=t.detailPage,s=t.detailSort;return Object(N.d)(D.a,{answerId:n,commentId:a,questionId:r,courseId:e,forumQuestionId:r,sort:s,page:o})},t.render=function render(){var e=this.props.q,t=this.props,r=t.role,a=t.questionId;return Object(N.d)("div",n()({className:f()("rc-ForumsV2DiscussionsBody","styleguide",this.props.className),id:"discussions-tabpanel","aria-label":C()("Discussions")},r?{role:r}:{}),a&&this.renderThreadDetail(),!a&&(e?this.renderSearchResults():this.renderThreadsList()))},DiscussionsBody}(d.a.Component);function booleanOrUndefinedFromString(e){if(/true/i.test(e))return!0;if(/false/i.test(e))return!1;return}A.contextTypes={router:u.a.object.isRequired,fluxibleContext:u.a.object,executeAction:u.a.func.isRequired},A.childContextTypes={fluxibleContext:u.a.object},A.defaultProps={detailSort:v.f.detailSort,detailPage:v.f.detailPage,listSort:v.f.listSort,listAnswered:v.f.listAnswered,listPage:v.f.listPage};var R=function getPropsFromRouter(e,t){var r=e.params,n=e.location.query,a=r.question_id||t.questionId,o=n.page?parseInt(n.page,10):1,s={answerId:r.answer_id||t.answerId,questionId:a,commentId:r.comment_id||t.commentId,sort:n.sort,answered:booleanOrUndefinedFromString(n.answered),page:o};return a?Object.assign(s,{detailSort:n.sort,detailAnswered:n.answered,detailPage:o}):n.q?Object.assign(s,{q:n.q,searchPage:o}):Object.assign(s,{listSort:n.sort,listAnswered:n.answered,listPage:o}),s},k=Object(p.compose)(Object(I.a)(["SessionFilterStore","SessionStore","CourseStore","CourseMembershipStore","ApplicationStore"],function(e){var t=e.SessionFilterStore,r=e.SessionStore,n=e.CourseStore,a=e.CourseMembershipStore,o=e.ApplicationStore;return{hasModerationRole:a.hasModerationRole()||o.isSuperuser(),isSessionsFilterStoreSetup:t.filtersLoaded,currentSessionId:r.isEnrolled()?r.getSessionId():void 0,courseId:n.getCourseId(),isPrivateSession:!!r.isEnrolled()&&r.isSessionPrivate()}}),Object(F.a)(R),b.a.createTrackedContainer(function(e){return{sort:e.sort,answered:e.answered,page:e.page}}))(A),B=function(e){function FluxibleConnectedDiscussionsBody(){for(var t,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(t=e.call.apply(e,[this].concat(n))||this).fluxibleContext=void 0,t}o()(FluxibleConnectedDiscussionsBody,e);var t=FluxibleConnectedDiscussionsBody.prototype;return t.componentWillMount=function componentWillMount(){var e=this.context.fluxibleContext;this.fluxibleContext=Object(x.a)(e)},t.render=function render(){var e;return Object(N.d)(E.a,{context:null===(e=this.fluxibleContext)||void 0===e?void 0:e.getComponentContext()},Object(N.d)(k,this.props))},FluxibleConnectedDiscussionsBody}(d.a.Component);B.contextTypes={fluxibleContext:u.a.object}},RYD2:function(module,e,t){"use strict";var r=t("VbXa"),n=t.n(r),a=t("w/1P"),o=t.n(a),s=t("CsdX"),i=t("q1tI"),c=t.n(i),u=t("eJMc"),l=t.n(u),d=t("F/us"),p=t.n(d),m=t("cIEV"),h=t.n(m),f=function emptyFunction(){},b=function(e){function Breadcrumbs(){return e.apply(this,arguments)||this}n()(Breadcrumbs,e);var t=Breadcrumbs.prototype;return t.getFilteredLinks=function getFilteredLinks(){var e;return this.props.links.slice().filter(d.identity)},t.render=function render(){var e=this.props,t=e.className,r=e.linkClassName,n=e.separator,a=e.separatorStyles,i=this.getFilteredLinks();return c.a.createElement("ol",{className:o()("rc-Breadcrumbs inline",t)},i.map(function(e,t){var o=[c.a.createElement("li",null,e.href?c.a.createElement(l.a,{className:r,to:e.href,onClick:e.onClick||f},e.label):c.a.createElement("span",{className:r},e.label))];return t!==i.length-1&&o.push(c.a.createElement("li",Object(s.d)("divider",a),n||"/")),o}))},Breadcrumbs}(c.a.Component);e.a=b},SqYO:function(module,exports,e){},"T/Ie":function(module,exports,e){},UCz2:function(module,exports,e){var t=e("ECux"),r;"string"==typeof t&&(t=[[module.i,t,""]]);var n={transform:void 0},a=e("aET+")(t,n);t.locals&&(module.exports=t.locals)},VDSF:function(module,exports,e){},VuLx:function(module,exports,e){var t=e("bof/"),r;"string"==typeof t&&(t=[[module.i,t,""]]);var n={transform:void 0},a=e("aET+")(t,n);t.locals&&(module.exports=t.locals)},"bof/":function(module,exports,e){},"cD+G":function(module,e,t){"use strict";var r=t("VbXa"),n=t.n(r),a=t("17x9"),o=t.n(a),s=t("q1tI"),i=t.n(s),c=t("F/us"),u=t.n(c),l=t("w/1P"),d=t.n(l),p=t("eJMc"),m=t.n(p),h=t("BVC1"),f=t("BZ+2"),b=t("zFZo"),v=t("weTL"),S=t("+LJP"),g=t("ii1C"),y=t("W1i5"),I=t("GqWO"),F=t("HbX8"),E=t("5+aF"),x=t("6fvP"),O=t("GP6s"),C=t.n(O),T=t("vJ/u"),j=t.n(T),w=function(e){function SubforumSidebar(t){var r;return(r=e.call(this,t)||this).resourcePanelEpic=x.b.enabledResourcePanelToPublic(),r}var t;return n()(SubforumSidebar,e),SubforumSidebar.prototype.render=function render(){var e=this,t=this.props,r=t.listedForums,n=t.currentForumId,a=t.parentForumId,o=t.courseSlug;if(!r||r.length<=1)return null;return i.a.createElement("div",{className:"rc-SubforumSidebar card-rich-interaction flex-1"},i.a.createElement("h2",{className:"subforums-list-title headline-1-text color-secondary-text"},C()("Subforums")),i.a.createElement("ul",{className:"nostyle"},r.map(function(t){var r=d()("forum-title",{"body-2-text":t.id===n,"body-1-text":t.id!==n}),s=h.a.join(Object(I.j)(o),t.link),c=Object(I.m)(t.forumId);return s=e.resourcePanelEpic&&c||s,i.a.createElement("li",{className:"subforum-entry"},i.a.createElement(m.a,{key:t.id,to:s,className:"nostyle","aria-current":t.id===n},t.id===n&&i.a.createElement("div",{className:"current-forum-indicator"}),i.a.createElement("div",{className:r},t.id===a?C()("All"):t.title)))})))},SubforumSidebar}(i.a.Component);w.propTypes={courseSlug:o.a.string,listedForums:o.a.arrayOf(o.a.oneOfType([o.a.instanceOf(f.a),o.a.instanceOf(b.a),o.a.instanceOf(v.a)])),currentForumId:o.a.string,parentForumId:o.a.string},e.a=u.a.compose(Object(E.a)({fields:["link","title","description","parentForumId"]}),Object(S.a)(g.a),Object(y.a)(F.a))(w)},cIEV:function(module,exports,e){var t=e("cOQ1"),r;"string"==typeof t&&(t=[[module.i,t,""]]);var n={transform:void 0},a=e("aET+")(t,n);t.locals&&(module.exports=t.locals)},cOQ1:function(module,exports,e){},eE4N:function(module,e,t){"use strict";var r=t("lSNA"),n=t.n(r),a=t("VbXa"),o=t.n(a),s=t("q1tI"),i=t.n(s),c=t("8gSW"),u=t("GqWO"),l=t("GP6s"),d=t.n(l),p=t("9A5E");function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach(function(t){n()(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var m=function(e){function SearchResultEntry(){return e.apply(this,arguments)||this}var t;return o()(SearchResultEntry,e),SearchResultEntry.prototype.render=function render(){var e=this.props.entry,t=i.a.createElement(c.a,{key:e.id+u.k(this.props.forumLink,this.props.entry),threadUrl:(null==e?void 0:e.title)&&u.k(this.props.forumLink,this.props.entry),profile:e.creator,timestamp:e.createdAt,threadName:e.threadName,questionUserId:e.creator.id,entry:_objectSpread(_objectSpread({},e),{},{content:{question:e.title,details:e.content},question:e.content,questionId:e.courseForumQuestionId}),questionId:e.courseForumQuestionId,metadataLabel:d()("posted")}),r;return!(null==e?void 0:e.title)&&i.a.createElement(p.c,{to:u.k(this.props.forumLink,e),trackingName:"thread_list_entry","aria-label":e.title,data:{question_id:e.courseForumQuestionId,question_user_id:e.creator.id},className:"nostyle"},t)||t},SearchResultEntry}(i.a.Component);e.a=m},fg2g:function(module,e,t){"use strict";var r=t("VkAN"),n=t.n(r),a=t("VbXa"),o=t.n(a),s=t("F/us"),i=t.n(s),c=t("17x9"),u=t.n(c),l=t("q1tI"),d=t.n(l),p=t("i1H6"),m=t("xJyF"),h=t("lTCR"),f=t.n(h),b=t("PJ/k"),v=t.n(b),S=t("q5zD"),g=t("/ms3"),y=t("KJtU"),I=t("8cuT"),F=t("+LJP"),E=t("GP6s"),x=t.n(E),O=t("VuLx"),C=t.n(O);function _templateObject(){var e=n()(["\n      query FilterSessionsV2AuthoringEligibilityCheckQuery($courseId: String!) {\n        SessionsV2AuthoringEligibilityCheckV1Resource {\n          get(id: $courseId) {\n            eligibleForSessionsV2\n          }\n        }\n      }\n    "]);return _templateObject=function _templateObject(){return e},e}var T=function(e){function SessionFilter(t,r){var n;return(n=e.call(this,t,r)||this).handleDropdownChange=function(e,t){"ondemand"===e?n.context.executeAction(y.d):"all"===e?n.context.executeAction(y.c,{branchId:t}):n.context.executeAction(y.e,{sessionId:e})},!t.loaded&&t.hasModerationRole&&r.executeAction(y.a,{courseId:t.courseId,currentSessionId:t.currentSessionId,isPrivateSession:t.isPrivateSession}),t.loaded||t.hasModerationRole||r.executeAction(y.b,{courseId:t.courseId,currentSessionId:t.currentSessionId,isPrivateSession:t.isPrivateSession}),n}var t;return o()(SessionFilter,e),SessionFilter.prototype.render=function render(){var e=this.props,t=e.discussionsLandingPageActive,r=e.loaded,n=e.hasModerationRole,a=e.isSessionsV2Enabled;if(!t||!r||!n)return null;var o=x()("Instructors can now change the structure of the discussion forums for each version of the course to better\n        fit the material. It is still possible to view all discussions in a particular version, but no longer\n        possible to view discussions across every session."),s="session-filter-tooltip",i=d.a.createElement(b.Tooltip,{id:s},o);return d.a.createElement("div",{className:"rc-SessionFilter card-rich-interaction cozy"},d.a.createElement("div",null,d.a.createElement("div",{className:"horizontal-box align-items-spacebetween"},d.a.createElement("div",null,d.a.createElement("h2",{className:"label-text color-secondary-text title"},d.a.createElement(S.a,{name:"lock"})," ",a?x()("Filter by version and cohort"):x()("Filter by session"))),this.props.containsMultipleBranches?d.a.createElement(b.OverlayTrigger,{placement:"bottom",overlay:i,trigger:["hover","focus"]},d.a.createElement("div",{className:"label-text color-secondary-text title",role:"tooltip",tabIndex:"0","aria-label":o},d.a.createElement(S.a,{name:"question-circle-o",className:"cif-lg"}))):null),d.a.createElement("p",{className:"caption-text color-secondary-text align-left"},x()("Visible to staff and mentors")),d.a.createElement(g.a,{isSessionsV2Enabled:a,handleDropdownChange:this.handleDropdownChange})))},SessionFilter}(d.a.Component);T.propTypes={courseId:u.a.string,loaded:u.a.bool,currentSessionId:u.a.string,discussionsLandingPageActive:u.a.bool,containsMultipleBranches:u.a.bool,hasModerationRole:u.a.bool,isPrivateSession:u.a.bool,forceLoad:u.a.bool,isSessionsV2Enabled:u.a.bool},T.contextTypes={executeAction:u.a.func.isRequired},T.defaultProps={forceLoad:!1},e.a=Object(s.compose)(Object(I.a)(["SessionFilterStore","SessionStore","CourseStore","CourseMembershipStore","ApplicationStore"],function(e,t){var r=e.SessionFilterStore,n=e.SessionStore,a=e.CourseStore,o=e.CourseMembershipStore,s=e.ApplicationStore;return{hasModerationRole:o.hasModerationRole()||s.isSuperuser(),loaded:r.filtersLoaded,containsMultipleBranches:!!r.containsMultipleBranches,currentSessionId:n.isEnrolled()?n.getSessionId():void 0,courseSlug:a.getCourseSlug(),courseId:a.getCourseId(),isPrivateSession:!!n.isEnrolled()&&n.isSessionPrivate()}}),Object(p.a)(["courseId"]),Object(m.a)(f()(_templateObject()),{options:function options(e){var t;return{variables:{courseId:e.courseId}}},props:function props(e){var t,r=e.data.SessionsV2AuthoringEligibilityCheckV1Resource;if(r){var n=r.get;return{isSessionsV2Enabled:n&&n.eligibleForSessionsV2}}return{isSessionsV2Enabled:!1}}}),Object(F.a)(function(e,t){return{discussionsLandingPageActive:t.forceLoad||e.isActive({pathname:"/learn/".concat(t.courseSlug,"/discussions"),query:e.location.query},!0)||e.isActive({pathname:"/learn/".concat(t.courseSlug,"/discussions/all"),query:e.location.query},!0)}}))(T)},hSS9:function(module,exports,e){var t=e("Jh7B"),r;"string"==typeof t&&(t=[[module.i,t,""]]);var n={transform:void 0},a=e("aET+")(t,n);t.locals&&(module.exports=t.locals)},jLko:function(module,e,t){"use strict";var r=t("lSNA"),n=t.n(r),a=t("VbXa"),o=t.n(a),s=t("kvW3"),i=t("oEt1"),c=t("eJMc"),u=t.n(c),l=t("17x9"),d=t.n(l),p=t("q1tI"),m=t.n(p),h=t("F/us"),f=t.n(h),b=t("JacN"),v=t("as3Y"),S=t("QXTe"),g=t("py0D"),y=t("u6zc"),I=t("T/K2"),F=t("abvH"),E=t("NMx/"),x=t("dJDe"),O=t("kRCD"),C=t("sWYI"),T=t("2BcA"),j=t("GqWO"),w=t("2xl4"),N=t("WE4C"),P=t("iaxl"),q=t("KRcl"),D=t("8cuT"),A=t("+LJP"),R=t("ii1C"),k=t("5+aF"),B=t("e8+g"),U=t("GP6s"),V=t.n(U),M=t("PDuk"),L=t("CxSU"),W=t.n(L);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach(function(t){n()(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var Q=T.d.limitPerPage,G=function(e){function ThreadDetail(){for(var t,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(t=e.call.apply(e,[this].concat(n))||this).state={canTeach:!1,inputClickCounter:0},t._isMounted=!1,t.fetchAnswerPosition=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=t.props,n=r.answerId,a=r.questionId,o=r.courseId,s=r.courseSlug,i=r.userId,c=r.contextId,u=r.currentForum,l=r.currentForumUrl,d=r.sort,p=r.page,m=e||n;if(!m)return;var h=Object(M.c)([o,m]);Object(w.b)(h,d,Q).then(function(e){e===p?t.context.executeAction(b.b,{questionId:a,courseId:o,courseSlug:s,userId:i,contextId:c,sort:d,page:p,forumType:u&&u.forumType.typeName,includeDeleted:t.props.hasModerationRole}):t.context.router.replace({pathname:t.context.router.location.pathname,params:{},query:_objectSpread(_objectSpread({},t.context.router.location.query),{page:e})})}).fail(function(){var e=l;t.context.router.replace(Object(j.a)(e,a)),t.context.executeAction(b.b,{userId:i,courseId:o,courseSlug:s,contextId:c,questionId:a,sort:T.f.detailSort,page:T.f.detailPage,forumType:u&&u.forumType.typeName,includeDeleted:t.props.hasModerationRole})}).done()},t}o()(ThreadDetail,e);var t=ThreadDetail.prototype;return t.componentWillMount=function componentWillMount(){var e=this.props,t=e.questionId,r=e.sort,n=e.page,a=e.answerId,o=e.userId,s=e.courseId,i=e.courseSlug,c=e.contextId,u=e.currentForum;this.context.executeAction(b.d,{questionId:t,userId:o,contextId:c,sort:r,page:n,forumType:u&&u.forumType.typeName}),a||1===n&&r===T.f.detailSort||this.context.executeAction(b.b,{questionId:t,userId:o,courseId:s,courseSlug:i,contextId:c,sort:r,page:n,forumType:u&&u.forumType.typeName,includeDeleted:this.props.hasModerationRole})},t.componentDidMount=function componentDidMount(){this.getRole(),this.fetchAnswerPosition(),this._isMounted=!0},t.componentWillReceiveProps=function componentWillReceiveProps(e){var t=e.questionId,r=e.userId,n=e.courseId,a=e.courseSlug,o=e.contextId,s=e.sort,i=e.page,c=e.currentForum;e.sort!==this.props.sort||e.page!==this.props.page?this.context.executeAction(b.b,{questionId:t,userId:r,courseId:n,courseSlug:a,contextId:o,sort:s,page:i,forumType:c&&c.forumType.typeName,includeDeleted:this.props.hasModerationRole}):this.props.answerSavingState===T.m.SAVING&&e.answerSavingState===T.m.SAVED&&(this.context.executeAction(b.b,{questionId:t,userId:r,courseId:n,courseSlug:a,contextId:o,sort:s,page:i,forumType:c&&c.forumType.typeName,includeDeleted:this.props.hasModerationRole}),this.context.router.push({pathname:window.location.pathname,params:{},query:{sort:T.c.newestSort}}))},t.componentDidUpdate=function componentDidUpdate(e,t,r){(e.questionId!==this.props.questionId||e.currentForum&&e.currentForum.id!==this.props.currentForum.id)&&this.markRead()},t.componentWillUnmount=function componentWillUnmount(){this._isMounted=!1},t.getRole=function getRole(){var e=this,t=this.props,r=t.authenticated,n=t.isSuperuser,a=t.currentForum,o=a&&a.forumType.definition.groupId;o?Object(q.a)(o,r,n).then(function(t){e._isMounted&&e.setState({canTeach:t})}):this.setState({canTeach:this.props.hasModerationRole})},t.getBackLinkDescription=function getBackLinkDescription(){return this.props.currentForum.title},t.markRead=function markRead(){N.a.markRead(this.props.questionId)},t.render=function render(){var e=this,t=this.props,r=t.question,n=t.isClosed,a=t.isPinned,o=t.currentForumUrl,c=t.currentForum,l=t.sort,d=t.page,p=t.questionId,h=t.answerId,f=t.latestNewThreadId,b=t.commentId,x=t.courseId,O=o,j=c&&c.forumType.typeName,w=T.j.mentorForumType,N=T.j.groupForumType,q=c&&[w,N].indexOf(j)<0,D=q,A=this.state.canTeach&&r&&q,R=r?Object(i.c)(r):"undefined-thread-legend",k=this.state.inputClickCounter,U=Object(P.a)();return m.a.createElement("div",{className:"rc-ThreadDetail"},r&&m.a.createElement("h2",{id:R,className:"screenreader-only"},m.a.createElement(s.b,{message:V()("Thread: {title}"),title:r.content.question})),A&&m.a.createElement(S.a,{isPinned:a,question:r}),f===p&&m.a.createElement("div",{className:"sr-only","aria-live":"polite"},m.a.createElement(s.b,{message:V()("Your new thread was created")})),m.a.createElement("div",{className:"discussion-content"},m.a.createElement("div",{className:"horizontal-box align-items-vertical-center align-items-spacebetween"},m.a.createElement(u.a,{to:this.props.backLink,className:"back-area nostyle"},m.a.createElement("div",{className:"horizontal-box align-items-vertical-center"},m.a.createElement("i",{className:"back-arrow cif-arrow-left c-back-arrow-image"}),m.a.createElement("h1",{className:"headline-2-text c-back-label"},this.getBackLinkDescription()))),this.state.canTeach&&r&&m.a.createElement(C.a,{question:r,shouldShowMoveThread:D})),m.a.createElement("div",{className:"frost-container"},m.a.createElement("div",null,m.a.createElement(v.a,{goToInput:function goToInput(){return e.setState({inputClickCounter:k+1})},question:r,isPinned:a,forumLink:O}),n&&m.a.createElement("div",{className:"c-thread-locked card-no-action color-secondary-text"},m.a.createElement("div",{className:"horizontal-box align-items-absolute-center"},m.a.createElement("i",{className:"cif-lock"}),V()("This thread is closed. You cannot add any more responses.")))),m.a.createElement("div",null,Object(B.a)(x,j)&&m.a.createElement(I.a,{answerId:h,commentId:b,forumLink:O,questionId:p,fetchAnswerPosition:this.fetchAnswerPosition}),r&&m.a.createElement(F.a,{page:d,sort:l,answerId:h,commentId:b,forumLink:O,questionId:p,fetchAnswerPosition:this.fetchAnswerPosition}),!n&&m.a.createElement("div",{className:"reply-container horizontal-box"},m.a.createElement(y.a,{fullName:U.get("fullName"),externalUserId:U.get("externalUserId"),profileImageUrl:U.getProfileImageUrl()}),r&&m.a.createElement(E.a,{question:r,parentPost:r,savingState:this.props.answerSavingState,shouldFocusCounter:this.state.inputClickCounter,ariaLabel:V()("Reply to this thread"),ariaDescribedBy:R})),r&&r.state&&r.state.deleted&&m.a.createElement(g.a,{entry:r,hideUndoDelete:!1})))))},ThreadDetail}(m.a.Component);G.contextTypes={executeAction:d.a.func.isRequired,router:d.a.object.isRequired},e.a=f.a.compose(Object(D.a)(["ThreadDetailsStore","ThreadsStore","ThreadSettingsStore","CourseStore","ApplicationStore"],function(e,t){var r=e.ThreadDetailsStore,n=e.ThreadsStore,a=e.ThreadSettingsStore,o=e.CourseStore,s=e.ApplicationStore,i=t.questionId,c=r.getQuestion(i),u=n.threadToInsert&&n.threadToInsert.questionId;return{question:c,courseId:o.getCourseId(),courseSlug:o.getCourseSlug(),answerSavingState:c&&r.savingStates[c.id],isClosed:a.isClosed(),isPinned:a.isPinned(),latestNewThreadId:u,userId:s.getUserData().id,authenticated:s.isAuthenticatedUser(),isSuperuser:s.isSuperuser()}}),Object(k.a)({fields:["link","title"],subcomponents:[x.a,E.a,O.a]}),Object(A.a)(R.a))(G)},oRWh:function(module,e,t){"use strict";t.d(e,"a",function(){return y});var r=t("VbXa"),n=t.n(r),a=t("AeFk"),o=t("w/1P"),s=t.n(o),i=t("8Hdl"),c=t("fAYU"),u=t("VS/1"),l=t("CsdX"),d=t("q1tI"),p=t.n(d),m=t("eJMc"),h=t.n(m),f=t("F/us"),b=t.n(f),v=t("cIEV"),S=t.n(v),g=function emptyFunction(){},y=function(e){function Breadcrumbs(){return e.apply(this,arguments)||this}n()(Breadcrumbs,e);var t=Breadcrumbs.prototype;return t.getFilteredLinks=function getFilteredLinks(){var e;return this.props.links.slice().filter(f.identity)},t.render=function render(){var e=this.props,t=e.className,r=e.linkClassName,n=e.separator,o=e.separatorStyles,d=this.getFilteredLinks();return Object(a.d)("ol",{className:s()("rc-Breadcrumbs inline",t)},d.map(function(e,t){var s=[Object(a.d)(i.a,{component:"li"},e.href?Object(a.d)(c.a,{variant:"quiet",component:h.a,className:r,to:e.href},e.label):Object(a.d)("span",{className:r},e.label))];return t!==d.length-1&&s.push(Object(a.d)("li",Object(l.d)("divider",o),n||Object(a.d)(u.a,{size:"small"}))),s}))},Breadcrumbs}(p.a.Component)},olxp:function(module,e,t){"use strict";var r=t("VbXa"),n=t.n(r),a=t("17x9"),o=t.n(a),s=t("q1tI"),i=t.n(s),c=t("F/us"),u=t.n(c),l=t("ZN56"),d=t("1AMt"),p=t("da3Y"),m=t("yb7V"),h=t("8gSW"),f=t("GqWO"),b=t("WE4C"),v=t("JVW9"),S=t("+LJP"),g=t("ii1C"),y=t("5+aF"),I=t("EdUP"),F=t("8cuT"),E=t("GP6s"),x=t.n(E),O=t("JTnn"),C=t.n(O),T=t("6/Gu"),j=function(e){function ThreadsList(){for(var t,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(t=e.call.apply(e,[this].concat(n))||this).state={inSearch:!1},t.entriesChanged=function(e,t){var r,n,a=!1;return e.length!==t.length&&(a=!0),(null===(r=e[0])||void 0===r?void 0:r.id)!==(null===(n=t[0])||void 0===n?void 0:n.id)&&(a=!0),a},t.onPageChange=function(e){var r;t.context.router.push({pathname:t.context.router.location.pathname,params:{},query:Object.assign(t.context.router.location.query,{page:e})})},t.toggleSearch=function(e){t.setState({inSearch:!e})},t.renderEntry=function(e){var r=t.props,n=r.activeFilterQueryString,a=r.courseForums,o=r.mentorForums,s=r.groupForums,c=r.currentForum,u=r.currentForumUrl,l=!b.a.hasUnread(e),d,p=e.lastAnsweredAt&&e.lastAnsweredBy?e.lastAnsweredBy:e.creator,m=x()("posted"),v,S=a.concat(o).concat(s).find(function(t){return t.forumId===e.forumId}),g=S&&c.id!==S.id&&S.title||void 0,y=f.k(u,e),I,F=void 0!==e.answerCount&&!isNaN(e.answerCount)?e.answerCount:e.topLevelAnswerCount;return i.a.createElement(h.a,{key:e.id+n,threadUrl:y,profile:p,timestamp:e.lastAnsweredAt||e.createdAt,threadName:e.content.question,questionId:e.id,questionUserId:e.creatorId,entry:e,isPinned:!(!e.state||!e.state.pinned),isDeleted:!(!e.state||!e.state.deleted),isRead:l,forumName:g,metadataLabel:m,viewCount:Math.max(F,e.viewCount),answerCount:F,badge:e.answerBadge.answerBadge})},t}n()(ThreadsList,e);var t=ThreadsList.prototype;return t.componentWillMount=function componentWillMount(){var e=this.props,t=e.sort,r=e.answered,n=e.page,a=e.currentForum,o=e.subForum,s=e.activeFilterQueryString,i=o||a;this.context.executeAction(l.c,{filterQueryString:s,sort:t,answered:r,pageNum:n,forumType:i&&i.forumType.typeName,forumId:i&&i.id,userId:this.props.userId,includeDeleted:this.props.hasModerationRole})},t.componentWillUpdate=function componentWillUpdate(e,t,r){var n,a,o=this.props,s=o.currentForum,i=o.subForum,c=s;i&&(c=i),(this.props.sort!==e.sort||this.props.answered!==e.answered||this.props.page!==e.page||this.props.currentForumId!==e.currentForumId||this.props.subForumId!==e.subForumId||(null===(n=this.props.subForum)||void 0===n?void 0:n.id)!==(null===(a=e.subForum)||void 0===a?void 0:a.id)||this.props.activeFilterQueryString!==e.activeFilterQueryString||this.entriesChanged(this.props.entries,e.entries))&&this.context.executeAction(l.c,{filterQueryString:e.activeFilterQueryString,sort:e.sort,answered:e.answered,pageNum:e.page,forumType:c&&c.forumType.typeName,forumId:c&&c.id,userId:this.props.userId,includeDeleted:this.props.hasModerationRole})},t.render=function render(){var e=this.context.router.isActive({pathname:f.c()}),t=!(void 0!==this.props.pageCount&&this.props.pageCount<=1);return i.a.createElement(T.a,{container:!0,className:"rc-ThreadsList",css:{maxWidth:"650px"}},i.a.createElement(T.a,{item:!0,xs:12},i.a.createElement(d.a,{currentForum:this.props.currentForum,inSearch:this.state.inSearch}),i.a.createElement(p.a,{emptyStatePlaceholderText:x()("No Posts Yet"),fossilized:this.state.inSearch,loadingState:this.props.loadingState},this.props.entries&&this.props.entries.map(this.renderEntry))),t&&i.a.createElement(T.a,{item:!0,xs:12,css:{justifyContent:"center"}},i.a.createElement(v.a,{style:{textAlign:"center",marginTop:"32px"},onClickHandler:this.onPageChange,pageCount:this.props.pageCount,currentPage:this.props.page,maxPages:5})))},ThreadsList}(i.a.Component);j.contextTypes={executeAction:o.a.func.isRequired,router:o.a.object.isRequired},e.a=Object(c.compose)(Object(F.a)(["SessionFilterStore","ThreadsStore","ApplicationStore"],function(e){var t=e.SessionFilterStore,r=e.ThreadsStore,n=e.ApplicationStore;return{activeFilterQueryString:t.activeFilterQueryString,entries:r.getThreadsPage(),loadingState:r.getLoadingState(),pageCount:r.getPageCount(),userId:n.getUserData().id}}),Object(y.a)({fields:["title","link","forumType"],subcomponents:[m.a]}),Object(S.a)(g.a),Object(I.a)(function(e){return!!(void 0!==e.activeFilterQueryString&&e.sort&&e.page&&e.currentForum)}))(j)},"vJ/u":function(module,exports,e){var t=e("VDSF"),r;"string"==typeof t&&(t=[[module.i,t,""]]);var n={transform:void 0},a=e("aET+")(t,n);t.locals&&(module.exports=t.locals)},vOU6:function(module,e,t){"use strict";t.d(e,"a",function(){return j});var r=t("VbXa"),n=t.n(r),a=t("q1tI"),o=t.n(a),s=t("2iyS"),i=t("wd/R"),c=t.n(i),u=t("w/1P"),l=t.n(u),d=t("tag9"),p=t("5gsr"),m=t("ULqJ"),h=t("yGl8"),f=t("AeFk"),b=t("763+"),v=t("6/Gu"),S=t("8Hdl"),g=t("oEqI"),y=t("GP6s"),I=t.n(y),F=t("0lLQ"),E=t("eJMc"),x=t.n(E),O=t("WBtN"),C=t("NQhL");function CardShimmer(){return Object(f.d)("div",{className:"rc-ForumsV2_ForumThreadCard"},Object(f.d)("div",{className:"rc-ForumsV2_ForumThreadCard__content"},Object(f.d)(O.b,{width:"100px"}),Object(f.d)("span",{className:l()("comment","br","animated","rc-ForumsV2_ForumThreadCard__content__PostAge"),style:{backgroundColor:O.c,display:"block",height:"10px",width:"40px"}})),Object(f.d)(O.a,null))}function PostAge(e){var t=e.createdAt,r=e.answerCount,n=r&&r>0?"replied":"posted";return Object(f.d)("span",null,n+" "+c()(new Date(t)).fromNow())}function ContributorNameWithIcon(e){var t=e.fullName,r=e.photoUrl,n=e.className,a=t&&Object(d.a)(t)||"--",o=Object(b.a)();return Object(f.d)("div",{className:n},Object(f.d)(C.a,{color:o.palette.blue[100],initials:a,photoUrl:r}),Object(f.d)("span",{css:{height:"36px",display:"inline-block",paddingLeft:"7px"}},t))}var T=function(e){function _ForumThreadCard(){return e.apply(this,arguments)||this}var t;return n()(_ForumThreadCard,e),_ForumThreadCard.prototype.render=function render(){var e=this.props,t=e.title,r=e.titleLink,n=e.description,a=e.badge,o=e.isRead,i=e.lastReplyDate,c=e.lastReplier;return Object(f.d)(v.a,{container:!0,className:"rc-ForumsV2_ForumThreadCard"},Object(f.d)(v.a,{container:!0,item:!0,css:{justifyContent:"flex-start",flexFlow:"initial"}},this.props.pinned&&Object(f.d)(v.a,{item:!0},Object(f.d)(F.a,{"aria-label":I()("pinned forum post"),size:"medium",css:{margin:this.props.theme.spacing(0,8,0,0),background:this.props.theme.palette.yellow[500],padding:"3px",height:"24px",width:"24px",borderRadius:"100%"}})),Object(f.d)(v.a,{item:!0},!r&&t&&Object(f.d)(S.a,{variant:o?"h2":"h2semibold",className:"rc-ForumsV2_ForumThreadCard__title"},t),r)),Object(f.d)(v.a,{item:!0,xs:12,css:{padding:this.props.theme.spacing(12,0,16,0)}},n),Object(f.d)(v.a,{item:!0,xs:12,className:"rc-ForumsV2_ForumThreadCard__content__tags",css:{padding:this.props.theme.spacing(0,0,24,0)}},a&&Object(f.d)(h.a,{badge:a})),Object(f.d)(v.a,{container:!0,item:!0,css:{justifyContent:"space-between"}},Object(f.d)(v.a,{item:!0,className:"rc-ForumsV2_ForumThreadCard__content__responseControls"},void 0!==this.props.replyCount&&this.props.creator&&Object(f.d)("span",{className:"rc-ForumsV2_ForumThreadCard__content__responseControls__controlContainer"},Object(s.a)(this.props.creator)&&Object(f.d)("span",{className:"rc-ForumsV2_ForumThreadCard__content__responseControls__controlContainer__button"},Object(f.d)(p.a,{creator:this.props.creator,forumPostId:this.props.forumQuestionId,upvotes:this.props.upvoteCount,isUpvoted:this.props.isUpvoted})),this.props.threadUrl&&Object(f.d)("span",{className:"rc-ForumsV2_ForumThreadCard__content__responseControls__controlContainer__button"},Object(f.d)(x.a,{to:this.props.threadUrl},Object(f.d)(m.a,{forumQuestionId:this.props.forumQuestionId,replies:this.props.replyCount,creator:this.props.creator}))))),Object(f.d)(v.a,{item:!0},Object(f.d)(S.a,{variant:"body2",component:"span",css:{display:"flex",flexFlow:"row",alignItems:"center",lineHeight:"36px"}},c&&Object(f.d)(ContributorNameWithIcon,{css:{display:"flex",alignItems:"center"},fullName:c.fullName,photoUrl:c.photoUrl}),Object(f.d)("span",{css:{padding:this.props.theme.spacing(0,4)}},"·"),this.props.tags&&Object(f.d)("span",{css:{lineHeight:"36px"}},this.props.tags),Object(f.d)("span",{css:{lineHeight:"36px"}},Object(f.d)(PostAge,{createdAt:i||this.props.createdAt||0,answerCount:this.props.answerCount||0}))))),this.props.children&&Object(f.d)(v.a,{item:!0},this.props.children))},_ForumThreadCard}(o.a.Component),j=Object(g.a)(T)},yGl8:function(module,e,t){"use strict";var r=t("VbXa"),n=t.n(r),a=t("q1tI"),o=t.n(a),s=t("e8+g"),i=t("8cuT"),c=t("d82X"),u=t("GP6s"),l=t.n(u);function getTranslations(){return{INSTRUCTOR_CREATED:l()("Staff post"),STAFF_CREATED:l()("Staff post"),INSTRUCTOR_RESPONDED:l()("Staff reply"),MENTOR_CREATED:l()("Mentor post"),STAFF_RESPONDED:l()("Staff reply"),MENTOR_RESPONDED:l()("Mentor reply"),HIGHLIGHTED:l()("Highlighted")}}var d=function(e){function ThreadBadge(){return e.apply(this,arguments)||this}var t;return n()(ThreadBadge,e),ThreadBadge.prototype.render=function render(){var e=this.props,t=e.badge,r=e.courseId,n=getTranslations(),a="";if(!(a=Object(s.a)(r)&&"HIGHLIGHTED"===t?n.HIGHLIGHTED:n[t]))return null;return o.a.createElement(c.a,{label:a})},ThreadBadge}(o.a.Component);e.a=Object(i.a)(d,["CourseStore"],function(e){var t;return{courseId:e.CourseStore.getCourseId()}})},yb7V:function(module,e,t){"use strict";t.d(e,"a",function(){return B});var r=t("VbXa"),n=t.n(r),a=t("q1tI"),o=t.n(a),s=t("17x9"),i=t.n(s),c=t("F/us"),u=t.n(c),l=t("BVC1"),d=t("EdUP"),p=t("W1i5"),m=t("+LJP"),h=t("3JZf"),f=t("8cuT"),b=t("JPjw"),v=t("IDuc"),S=t("I4GC"),g=t("/ms3"),y=t("ZN56"),I=t("6B5c"),F=t("GqWO"),E=t("h4VP"),x=t("7/QA"),O=t("2BcA"),C=t("ii1C"),T=t("5+aF"),j=t("GP6s"),w=t.n(j),N=t("ikq3"),P=t("pYrm"),q=t.n(P),D=t("8Hdl"),A=t("ZJgU"),R=function(e){function NewThreadButton(t,r){var n;return(n=e.call(this,t,r)||this).handleSubmit=function(){var e=n.state,t=e.currentForum,r=e.activeFilterId,a=e.title,o=e.content,s=n.props,i=s.userId,c=s.filter,l=s.showSessionSelector,d=n.context.executeAction,p;if(u()(n.state).any(function(e){return e.hasError}))a.hasError?n.titleElemRef.focus():o.hasError?n.contentElemRef.focus():t.hasError&&n.forumElemRef.focus(),n.setState({showErrors:!0});else{var m={title:a.value,content:o.value,context:""};l?m.context=r:c&&(m.context=c.id);var h=!!m.context&&"all"!==m.context&&"ondemand"!==m.context,f={content:{question:m.title,details:m.content},overrideSessionId:h?m.context:void 0,state:{},userId:i,courseForumId:t.value.id,mentorForumId:t.value.id,groupForumId:t.value.id},b=t.value.forumId,v=t.value.forumType&&t.value.forumType.typeName;n.setState({saving:!0}),d(y.a,{options:f,forumType:v,forumId:b})}},n.handleDropdownChange=function(e){n.setState({activeFilterId:e})},n.handleOpenModal=function(){var e=n.props,t=e.userId,r=e.course,a=e.verificationDisplay;Object(I.a)(t,r,a).then(function(){return n.handleOpen()})},n.handleCancel=function(){n.setState(n.resetState())},n.handleCloseModal=function(){n.setState({showModal:!1})},n.handleInputChange=function(e,t){var r=n.state[e];r.value=t.value,r.hasError=!t.isValid,n.setState(function(e){return e})},n.clearErrorsAndSubmit=function(){n.setState({showErrors:!1}),setTimeout(function(){n.handleSubmit()},500)},n.setTitleElemRef=function(e){n.titleElemRef=e},n.setContentElemRef=function(e){n.contentElemRef=e},n.setForumElemRef=function(e){n.forumElemRef=e},n.state=n.resetState(),n.titleElemRef={},n.contentElemRef={},n.forumElemRef={},n}n()(NewThreadButton,e);var t=NewThreadButton.prototype;return t.componentWillReceiveProps=function componentWillReceiveProps(e){var t=this.props.threadSavingState,r;if(!this.state.saving){var n,a=this.props.currentForum,o=!a;this.setState({currentForum:{value:a,hasError:o}})}t===O.m.SAVING&&e.threadSavingState===O.m.SAVED?this.handleSaveSuccess(e.newThread):t===O.m.SAVING&&e.threadSavingState===O.m.ERROR&&this.handleSaveError()},t.handleSaveSuccess=function handleSaveSuccess(e){var t=this.context.router,r=this.state.currentForum,n=this.props.rootPath,a=l.a.join(n,r.value.link);t.push(Object(F.a)(a,e.questionId)),this.setState(this.resetState())},t.handleSaveError=function handleSaveError(){this.setState({saveError:!0,saveErrorMessage:w()("Something went wrong. Please reload the page and try again."),saving:!1})},t.handleOpen=function handleOpen(){var e=this.state.showModal;this.setState(function(){return{showModal:!e}})},t.resetState=function resetState(){var e,t=this.props.currentForum,r=!t;return{showModal:!1,title:{value:"",hasError:!0},content:{value:E.c.create("",O.a),hasError:!0},currentForum:{value:t,hasError:r},showErrors:!1,saving:!1,saveError:!1,saveErrorMessage:"",activeFilterId:""}},t.render=function render(){var e=this,t=this.state,r=t.showModal,n=t.saving,a=t.saveError,s=t.content,i=t.showErrors,c=t.title,l=t.currentForum,d=t.saveErrorMessage,p=this.props,m=p.courseId,h=p.showSessionSelector,f=p.rootForumId,y=p.forums,I=x.a.generateContentLengthWarning(s.value),F=o.a.createElement("div",{className:"error-text c-modal-error-message"},d),E=null,O=l.value,C=y.filter(function(e){return!e.parentForumId||e.parentForumId===f}),T=u()(C.map(function(e){return[e].concat(y.filter(function(t){return t.parentForumId===e.id}))})).flatten(),j;T.length&&(E=o.a.createElement("div",{className:"c-input-area"},o.a.createElement(N.a,{fieldName:w()("Forum")}),o.a.createElement(S.b,{id:"forum-selector",rootForumId:f,hasError:i&&l.hasError,handleInputChange:this.handleInputChange,forums:T,value:O,elemRefHook:this.setForumElemRef}))),h&&(j=o.a.createElement("div",{className:"context-selector-container"},o.a.createElement("div",{className:"bgcolor-divider bt3-pull-left section-divider"}),o.a.createElement("div",{className:"c-input-area"},o.a.createElement(D.a,{component:"h3",variant:"h2semibold"},w()("You're currently viewing All Sessions.")),o.a.createElement(D.a,{component:"label",htmlFor:"new-thread-sessions-switcher"},o.a.createElement("span",{className:"caption-text color-secondary-text"},w()("Which session should this thread go in?"))),o.a.createElement(g.a,{id:"new-thread-sessions-switcher",hideAllSessionsOption:!0,limitSwitchingToCurrentBranch:!0,dropup:!0,handleDropdownChange:this.handleDropdownChange}))));var P=o.a.createElement(b.a,{onRequestClose:this.handleCloseModal,modalName:w()("Create a new post"),className:"rc-ForumsV2__NewThreadModal large"},o.a.createElement(D.a,{component:"h1",variant:"h1semibold",className:"c-modal-title"},w()("Create a new post")),o.a.createElement("div",{className:"c-input-area"},o.a.createElement(N.a,{fieldName:w()("Title")}),o.a.createElement(S.c,{id:"title-input",hasError:i&&c.hasError,value:c.value,handleInputChange:this.handleInputChange,elemRefHook:this.setTitleElemRef})),o.a.createElement("div",{className:"c-input-area"},o.a.createElement(N.a,{fieldName:w()("Body")}),o.a.createElement(S.a,{id:"content-input",courseId:m,hasError:i&&s.hasError,handleInputChange:this.handleInputChange,cml:s.value,elemRefHook:this.setContentElemRef})),E,j,o.a.createElement("div",null,I,a&&F,o.a.createElement("div",{className:"horizontal-box align-items-right"},o.a.createElement(A.a,{size:"small",type:"button",className:"passive",onClick:this.handleCancel},w()("Cancel")),"  ",o.a.createElement(A.a,{component:v.a,ref:function ref(t){e.submitButton=t},disabled:n,size:"small",variant:"secondary",type:"submit",onClick:this.clearErrorsAndSubmit,trackingName:"new_thread_create",withVisibilityTracking:!0,requireFullyVisible:!1},w()("Post")))));return o.a.createElement("div",{className:"rc-ForumsV2__NewThreadForm"},o.a.createElement(A.a,{component:v.a,variant:"secondary",size:"medium",ref:function ref(t){e.newThreadButton=t},id:"new-thread-btn",onClick:this.handleOpenModal,trackingName:"new_thread_button",withVisibilityTracking:!0,requireFullyVisible:!1},w()("Create a post")),r&&P)},NewThreadButton}(o.a.Component);R.contextTypes={executeAction:i.a.func.isRequired,router:i.a.object.isRequired};var k=u.a.compose(Object(f.a)(["SessionFilterStore","ThreadsStore","ApplicationStore","CourseMembershipStore","VerificationStore","CourseStore"],function(e,t){var r=e.SessionFilterStore,n=e.ThreadsStore,a=e.ApplicationStore,o=e.CourseMembershipStore,s=e.VerificationStore,i=e.CourseStore;return{showSessionSelector:(a.isSuperuser()||o.hasModerationRole())&&"all"===r.activeFilterQueryString,filter:r.activeFilter,threadSavingState:n.savingState,newThread:n.threadToInsert,userId:a.getUserData().id,verificationDisplay:s.getVerificationDisplay(),course:i.getMetadata(),courseId:i.getCourseId()}}),Object(T.a)({fields:["forumType","title","link"]}),Object(m.a)(C.a),Object(p.a)(function(e){var t=e.currentForum&&e.currentForum.forumType.typeName!==O.j.rootForumType&&e.currentForum||void 0,r=e.courseForums&&e.courseForums.find(function(e){return e.forumType.typeName===O.j.rootForumType});return{forums:e.courseForums?e.courseForums.filter(function(e){return e.forumType.typeName!==O.j.rootForumType}).concat(e.mentorForums).concat(e.groupForums):[],rootForumId:r&&r.id,currentForum:t,currentForumId:t&&t.id}}),Object(d.a)(function(e){return e.forums.length}))(R);e.b=Object(h.a)()(k);var B=k,U=R},zfwB:function(module,e,t){"use strict";var r=t("RYD2"),n=t("oRWh");t.d(e,"a",function(){return n.a});var a=r.a},zwd1:function(module,e,t){"use strict";var r=t("VbXa"),n=t.n(r),a=t("AeFk"),o=t("F/us"),s=t.n(o),i=t("17x9"),c=t.n(i),u=t("q1tI"),l=t.n(u),d=t("sQ/U"),p=t("AgXR"),m=t("ZJgU"),h=t("8xbv"),f=t("q5zD"),b=t("8cuT"),v=t("GP6s"),S=t.n(v),g=t("hSS9"),y=t.n(g);function SubscribeButton(e){var t=e.onClick,r=e.disabled,n=e.className,o=e.ariaLabel,s=e.isSubscriptionInProgress,i=e.isSubscribed,c=e.subscription,u=i?S()("Unsubscribe"):S()("Subscribe"),l,d=!s&&null===c?S()("Error"):u;if(s)return Object(a.d)(f.a,{name:"spinner",className:"cif-spin"});return Object(a.d)(m.a,{className:n,type:"button",size:"small",variant:"ghost","aria-label":o,onClick:t,disabled:!c,icon:s&&Object(a.d)(h.a,{size:"small"}),iconPosition:s&&"after"},d)}var I=function(e){function ForumsV2SubscriptionButton(t,r){var n;return(n=e.call(this,t,r)||this).toggleSubscription=function(){var e=n.props,t=e.isSubscribed,r=e.forumType,a=e.subscription,o=e.forumSubscriptionId;t?(n.context.executeAction(p.b,{subscription:a,forumSubscriptionId:o,forumType:r}),n.setState({showSubscriptionDetails:!0,subscriptionDetails:S()("You will no longer receive emails whenever new threads are added.")})):(n.context.executeAction(p.a,{forumType:r,forumSubscriptionId:o}),n.setState({showSubscriptionDetails:!0,subscriptionDetails:S()("You will receive emails whenever new threads are added.")}))},n.state={subscriptionDetails:{},showSubscriptionDetails:!1},n}n()(ForumsV2SubscriptionButton,e);var t=ForumsV2SubscriptionButton.prototype;return t.componentDidMount=function componentDidMount(){var e=this.props,t=e.subscription,r=e.forumSubscriptionId,n=e.forumType;null!==t&&(t||this.context.executeAction(p.c,{forumType:n,forumSubscriptionId:r}))},t.componentDidUpdate=function componentDidUpdate(){var e=this.props,t=e.subscription,r=e.forumSubscriptionId,n=e.forumType;null!==t&&(t||this.context.executeAction(p.c,{forumType:n,forumSubscriptionId:r}))},t.render=function render(){var e=this.props,t=e.subscription,r=e.isSubscribed,n=e.hasError,o=e.isSubscriptionInProgress,s=this.state,i=s.showSubscriptionDetails,c=s.subscriptionDetails;return Object(a.d)("div",{className:"rc-ForumsV2__SubscriptionButton horizontal-box vertical-when-mobile align-items-vertical-center"},Object(a.d)(SubscribeButton,{className:"subscription-button",ariaLabel:S()("Button"),onClick:this.toggleSubscription,disabled:!t,isSubscriptionInProgress:o,subscription:t,isSubscribed:r}),!n&&i&&Object(a.d)("div",{className:"message caption-text"},c),n&&Object(a.d)("div",{className:"errorMessage"},S()("Sorry, something went wrong. Try again.")),i&&Object(a.d)("span",{className:"screenreader-only","aria-live":"polite"},t&&!o&&r?S()("Subscribed, You will receive emails whenever new threads are added."):S()("Unsubscribed, You will no longer receive emails whenever new threads are added.")))},ForumsV2SubscriptionButton}(l.a.Component);I.contextTypes={executeAction:c.a.func.isRequired},e.a=s.a.compose(Object(b.a)(["SubscriptionStore","CourseMembershipStore","CourseStore"],function(e,t){var r=e.SubscriptionStore,n=null==t?void 0:t.forumId,a=n&&n.split("~"),o=n&&"".concat(d.a.get().id,"~").concat(a[0],"~").concat(a[1]),s=d.a.isAuthenticatedUser();return{forumSubscriptionId:o,hasError:r.hasError(),subscription:s&&!r.hasError()?r.getSubscription(o):null,isSubscribed:s&&!r.hasError()?r.getIsSubscribed(o):null,isSubscriptionInProgress:s&&!r.hasError()?r.getIsSubscriptionInProgress(o):null}}))(I)}}]);
//# sourceMappingURL=67.52769c2449591c941e98.js.map